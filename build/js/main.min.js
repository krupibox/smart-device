"use strict";!function(){var t=document.querySelector("body"),e=t.querySelector(".inner"),o=e.querySelector(".overlay"),a=e.querySelector(".modal"),n=e.querySelector(".button"),l=a.querySelector("img"),r=e.querySelector(".modal__form"),i=t.querySelector(".form:not(.modal__form)"),c=r.querySelector("#modal-form-name"),s=r.querySelector("#modal-form-phone"),u=r.querySelector("#modal-form-questions"),d=i.querySelector("#form-name"),m=i.querySelector("#form-phone"),f=i.querySelector("#form-questions"),v=r.querySelector("input[name=modal-acceptance]"),y=i.querySelector("input[name=form-acceptance]"),g=e.querySelector(".scroll-down"),S=e.querySelector(".company__button");function q(e,n){var l,r=window.pageYOffset,t=window.pageYOffset+document.querySelector(e).getBoundingClientRect().top,i=(document.body.scrollHeight-t<window.innerHeight?document.body.scrollHeight-window.innerHeight:t)-r;i&&window.requestAnimationFrame(function e(t){var o=t-(l=l||t),a=Math.min(o/n,1);window.scrollTo(0,r+i*a),o<n&&window.requestAnimationFrame(e)})}g&&g.addEventListener("click",function(e){e.preventDefault(),q("#advantages",500)}),S&&S.addEventListener("click",function(e){e.preventDefault(),q("#questions",500)});var h={mask:"+{7} (000) 000-00-00"},p=IMask(s,h),L=IMask(m,h);p.updateValue(),L.updateValue();var w=!0;try{c.value=localStorage.getItem("formName")}catch(e){w=!1}function E(e){Array.from(e.querySelectorAll("input:not([type=checkbox]), textarea")).forEach(function(e){e.value=""}),window.localStorage.clear(),e.reset()}function I(e){e.preventDefault(),t.classList.remove("noscroll"),a.classList.add("modal--closed"),o.style.display="none"}w&&(d.value=localStorage.getItem("formName"),m.value=localStorage.getItem("formPhone"),f.value=localStorage.getItem("formQuestions")),n.addEventListener("click",function(e){e.preventDefault(),a.classList.contains("modal--closed")&&(a.classList.remove("modal--closed"),t.classList.add("noscroll"),o.style.display="block",w&&(c.value=localStorage.getItem("modalFormName"),s.value=localStorage.getItem("modalFormPhone"),u.value=localStorage.getItem("modalFormQuestions")),c.value?s.focus():c.focus(),c.value&&s.value&&u.focus()),r.addEventListener("change",function(){w&&(localStorage.setItem("modalFormName",c.value),localStorage.setItem("modalFormPhone",s.value),localStorage.setItem("modalFormQuestions",u.value))}),s.addEventListener("change",function(){s.validity.patternMismatch?s.setCustomValidity("Введите в формате +7 (ХХХ) ХХХ-ХХ-ХХ"):s.setCustomValidity("")}),v.addEventListener("change",function(){v.validity.valueMissing?v.setCustomValidity("Согласитесь на обработку персональных данных"):v.setCustomValidity("")}),r.addEventListener("submit",function(){E(r)})}),l.addEventListener("click",function(e){a.classList.contains("modal--closed")||I(e)}),o.addEventListener("click",function(e){a.classList.contains("modal--closed")||e.target!==o||I(e)}),window.addEventListener("keydown",function(e){27!==e.keyCode||a.classList.contains("modal--closed")||I(e)}),i.addEventListener("change",function(){w&&(localStorage.setItem("formName",d.value),localStorage.setItem("formPhone",m.value),localStorage.setItem("formQuestions",f.value))}),m.addEventListener("change",function(){m.validity.patternMismatch?m.setCustomValidity("Введите в формате +7 (ХХХ) ХХХ-ХХ-ХХ"):m.setCustomValidity("")}),y.addEventListener("change",function(){y.validity.valueMissing?y.setCustomValidity("Согласитесь на обработку персональных данных"):y.setCustomValidity("")}),i.addEventListener("submit",function(){E(i)})}();