"use strict";!function(){var o=document.querySelector("body"),e=o.querySelector(".inner"),t=e.querySelector(".overlay"),a=e.querySelector(".modal"),l=e.querySelector(".button"),r=a.querySelector("img"),c=e.querySelector(".modal__form"),n=o.querySelector(".form:not(.modal__form)"),s=c.querySelector("#modal-form-name"),m=c.querySelector("#modal-form-phone"),u=c.querySelector("#modal-form-questions"),d=n.querySelector("#form-name"),i=n.querySelector("#form-phone"),f=n.querySelector("#form-questions"),v={mask:"+{7} (000) 000-00-00"},S=IMask(m,v),y=IMask(i,v);S.updateValue(),y.updateValue();var g=!0;try{s.value=localStorage.getItem("formName")}catch(e){g=!1}function q(e){Array.from(e.querySelectorAll("input:not([type=checkbox]), textarea")).forEach(function(e){e.value=""}),window.localStorage.clear(),e.reset()}function L(e){e.preventDefault(),o.classList.remove("noscroll"),a.classList.add("modal--closed"),t.style.display="none"}g&&(d.value=localStorage.getItem("formName"),i.value=localStorage.getItem("formPhone"),f.value=localStorage.getItem("formQuestions")),l.addEventListener("click",function(e){a.classList.contains("modal--closed")&&(e.preventDefault(),a.classList.remove("modal--closed"),o.classList.add("noscroll"),t.style.display="block",g&&(s.value=localStorage.getItem("modalFormName"),m.value=localStorage.getItem("modalFormPhone"),u.value=localStorage.getItem("modalFormQuestions")),s.value?m.focus():s.focus(),s.value&&m.value&&u.focus()),c.addEventListener("change",function(){g&&(localStorage.setItem("modalFormName",s.value),localStorage.setItem("modalFormPhone",m.value),localStorage.setItem("modalFormQuestions",u.value))}),c.addEventListener("submit",function(){q(c)})}),n.addEventListener("change",function(){g&&(localStorage.setItem("formName",d.value),localStorage.setItem("formPhone",i.value),localStorage.setItem("formQuestions",f.value))}),n.addEventListener("submit",function(){q(n)}),r.addEventListener("click",function(e){a.classList.contains("modal--closed")||L(e)}),t.addEventListener("click",function(e){a.classList.contains("modal--closed")||e.target!==t||L(e)}),window.addEventListener("keydown",function(e){27!==e.keyCode||a.classList.contains("modal--closed")||L(e)})}();