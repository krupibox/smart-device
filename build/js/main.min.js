"use strict";!function(){var o=document.querySelector("body"),e=o.querySelector(".inner"),t=e.querySelector(".overlay"),a=e.querySelector(".modal"),l=e.querySelector(".button"),r=a.querySelector("img"),c=e.querySelector(".modal__form"),n=o.querySelector(".form:not(.modal__form)"),s=c.querySelector("button"),u=n.querySelector("button"),m=c.querySelector("#modal-form-name"),d=c.querySelector("#modal-form-phone"),i=c.querySelector("#modal-form-questions"),f=n.querySelector("#form-name"),v=n.querySelector("#form-phone"),S=n.querySelector("#form-questions"),y={mask:"+{7} (000) 000-00-00"},g=IMask(d,y),q=IMask(v,y);g.updateValue(),q.updateValue();var L=!0;try{m.value=localStorage.getItem("formName")}catch(e){L=!1}function I(e){Array.from(e.querySelectorAll("input:not([type=checkbox]), textarea")).forEach(function(e){e.value=""}),window.localStorage.clear(),e.reset()}function p(e){e.preventDefault(),o.classList.remove("noscroll"),a.classList.add("modal--closed"),t.style.display="none"}L&&(f.value=localStorage.getItem("formName"),v.value=localStorage.getItem("formPhone"),S.value=localStorage.getItem("formQuestions"),m.value=localStorage.getItem("modalFormName"),d.value=localStorage.getItem("modalFormPhone"),i.value=localStorage.getItem("modalFormQuestions")),l.addEventListener("click",function(e){a.classList.contains("modal--closed")&&(e.preventDefault(),a.classList.remove("modal--closed"),o.classList.add("noscroll"),t.style.display="block",m.value?d.focus():m.focus(),m.value&&d.value&&i.focus()),c.addEventListener("change",function(){L&&(localStorage.setItem("modalFormName",m.value),localStorage.setItem("modalFormPhone",d.value),localStorage.setItem("modalFormQuestions",i.value))})}),s.addEventListener("click",function(e){e.preventDefault(),I(c)}),n.addEventListener("change",function(){L&&(localStorage.setItem("formName",f.value),localStorage.setItem("formPhone",v.value),localStorage.setItem("formQuestions",S.value))}),u.addEventListener("submit",function(e){e.preventDefault(),I(n)}),r.addEventListener("click",function(e){a.classList.contains("modal--closed")||p(e)}),t.addEventListener("click",function(e){a.classList.contains("modal--closed")||e.target!==t||p(e)}),window.addEventListener("keydown",function(e){27!==e.keyCode||a.classList.contains("modal--closed")||p(e)})}();