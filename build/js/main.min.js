"use strict";!function(){var e,t,o=document.querySelector("body"),a=o.querySelector(".inner"),l=a.querySelector(".overlay"),n=a.querySelector(".modal"),r=a.querySelector(".button"),s=n.querySelector("img"),c=a.querySelector(".modal__form"),i=o.querySelector(".form:not(.modal__form)"),u=c.querySelector("#modal-form-name"),m=c.querySelector("#modal-form-phone"),d=c.querySelector("#modal-form-questions"),v=i.querySelector("#form-name"),f=i.querySelector("#form-phone"),y=i.querySelector("#form-questions"),S=c.querySelector("input[name=modal-acceptance]"),g=i.querySelector("input[name=form-acceptance]"),q=a.querySelector(".scroll-down"),L=o.querySelector("#advantages");t=L,(e=q)&&t&&e.addEventListener("click",function(e){e.preventDefault(),t.scrollIntoView({block:"start",behavior:"smooth"})});var h={mask:"+{7} (000) 000-00-00"},p=IMask(m,h),I=IMask(f,h);p.updateValue(),I.updateValue();var E=!0;try{u.value=localStorage.getItem("formName")}catch(e){E=!1}function k(e){Array.from(e.querySelectorAll("input:not([type=checkbox]), textarea")).forEach(function(e){e.value=""}),window.localStorage.clear(),e.reset()}function V(e){e.preventDefault(),o.classList.remove("noscroll"),n.classList.add("modal--closed"),l.style.display="none"}E&&(v.value=localStorage.getItem("formName"),f.value=localStorage.getItem("formPhone"),y.value=localStorage.getItem("formQuestions")),r.addEventListener("click",function(e){e.preventDefault(),n.classList.contains("modal--closed")&&(n.classList.remove("modal--closed"),o.classList.add("noscroll"),l.style.display="block",E&&(u.value=localStorage.getItem("modalFormName"),m.value=localStorage.getItem("modalFormPhone"),d.value=localStorage.getItem("modalFormQuestions")),u.value?m.focus():u.focus(),u.value&&m.value&&d.focus()),c.addEventListener("change",function(){E&&(localStorage.setItem("modalFormName",u.value),localStorage.setItem("modalFormPhone",m.value),localStorage.setItem("modalFormQuestions",d.value))}),m.addEventListener("change",function(){m.validity.patternMismatch?m.setCustomValidity("Введите в формате +7 (ХХХ) ХХХ-ХХ-ХХ"):m.setCustomValidity("")}),S.addEventListener("change",function(){S.validity.valueMissing?S.setCustomValidity("Согласитесь на обработку персональных данных"):S.setCustomValidity("")}),c.addEventListener("submit",function(){k(c)})}),s.addEventListener("click",function(e){n.classList.contains("modal--closed")||V(e)}),l.addEventListener("click",function(e){n.classList.contains("modal--closed")||e.target!==l||V(e)}),window.addEventListener("keydown",function(e){27!==e.keyCode||n.classList.contains("modal--closed")||V(e)}),i.addEventListener("change",function(){E&&(localStorage.setItem("formName",v.value),localStorage.setItem("formPhone",f.value),localStorage.setItem("formQuestions",y.value))}),f.addEventListener("change",function(){f.validity.patternMismatch?f.setCustomValidity("Введите в формате +7 (ХХХ) ХХХ-ХХ-ХХ"):f.setCustomValidity("")}),g.addEventListener("change",function(){g.validity.valueMissing?g.setCustomValidity("Согласитесь на обработку персональных данных"):g.setCustomValidity("")}),i.addEventListener("submit",function(){k(i)})}();