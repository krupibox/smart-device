"use strict";!function(){var t=document.querySelector("body"),e=t.querySelector(".inner"),o=e.querySelector(".overlay"),a=e.querySelector(".modal"),l=e.querySelector(".button"),n=a.querySelector("img"),r=e.querySelector(".modal__form"),s=t.querySelector(".form:not(.modal__form)"),c=r.querySelector("#modal-form-name"),i=r.querySelector("#modal-form-phone"),u=r.querySelector("#modal-form-questions"),m=s.querySelector("#form-name"),d=s.querySelector("#form-phone"),v=s.querySelector("#form-questions"),f=r.querySelector("input[name=modal-acceptance]"),y=s.querySelector("input[name=form-acceptance]"),g={mask:"+{7} (000) 000-00-00"},S=IMask(i,g),L=IMask(d,g);S.updateValue(),L.updateValue();var q=!0;try{c.value=localStorage.getItem("formName")}catch(e){q=!1}function h(e){Array.from(e.querySelectorAll("input:not([type=checkbox]), textarea")).forEach(function(e){e.value=""}),window.localStorage.clear(),e.reset()}function p(e){e.preventDefault(),t.classList.remove("noscroll"),a.classList.add("modal--closed"),o.style.display="none"}q&&(m.value=localStorage.getItem("formName"),d.value=localStorage.getItem("formPhone"),v.value=localStorage.getItem("formQuestions")),l.addEventListener("click",function(e){e.preventDefault(),a.classList.contains("modal--closed")&&(a.classList.remove("modal--closed"),t.classList.add("noscroll"),o.style.display="block",q&&(c.value=localStorage.getItem("modalFormName"),i.value=localStorage.getItem("modalFormPhone"),u.value=localStorage.getItem("modalFormQuestions")),c.value?i.focus():c.focus(),c.value&&i.value&&u.focus()),r.addEventListener("change",function(){q&&(localStorage.setItem("modalFormName",c.value),localStorage.setItem("modalFormPhone",i.value),localStorage.setItem("modalFormQuestions",u.value))}),i.addEventListener("change",function(){i.validity.patternMismatch?i.setCustomValidity("Введите в формате +7 (ХХХ) ХХХ-ХХ-ХХ"):i.setCustomValidity("")}),f.addEventListener("change",function(){f.validity.valueMissing?f.setCustomValidity("Согласитесь на обработку персональных данных"):f.setCustomValidity("")}),r.addEventListener("submit",function(){h(r)})}),n.addEventListener("click",function(e){a.classList.contains("modal--closed")||p(e)}),o.addEventListener("click",function(e){a.classList.contains("modal--closed")||e.target!==o||p(e)}),window.addEventListener("keydown",function(e){27!==e.keyCode||a.classList.contains("modal--closed")||p(e)}),s.addEventListener("change",function(){q&&(localStorage.setItem("formName",m.value),localStorage.setItem("formPhone",d.value),localStorage.setItem("formQuestions",v.value))}),d.addEventListener("change",function(){d.validity.patternMismatch?d.setCustomValidity("Введите в формате +7 (ХХХ) ХХХ-ХХ-ХХ"):d.setCustomValidity("")}),y.addEventListener("change",function(){y.validity.valueMissing?y.setCustomValidity("Согласитесь на обработку персональных данных"):y.setCustomValidity("")}),s.addEventListener("submit",function(){h(s)})}();